<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ENE-LOG - Dialogue with KUKAI</title>
    <style>
        :root {
            --seiryu-blue: #00e5ff;
            --deep-blue: #001a33;
            --header-height: 60px; --nav-height: 75px;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body, html { width: 100%; height: 100%; font-family: 'Hiragino Mincho ProN', serif; overflow: hidden; background: #000; }

        /* --- Framework --- */
        header { position: fixed; top: 0; width: 100%; height: var(--header-height); background: rgba(255,255,255,0.95); backdrop-filter: blur(10px); display: flex; align-items: center; justify-content: center; z-index: 3000; border-bottom: 1px solid #ddd; }
        .view { display: none; width: 100%; height: calc(100vh - var(--header-height) - var(--nav-height)); margin-top: var(--header-height); position: relative; overflow-y: auto; background: #f0f4f8; }
        .view.active { display: block; }

        /* --- Ryuo Chat View --- */
        #ryuo-view { background: radial-gradient(circle at center, #002b55 0%, #000 100%); display: flex; flex-direction: column; color: white; }
        
        .chat-container { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; scroll-behavior: smooth; }
        
        /* é¾ç‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .bubble-ryuo { align-self: flex-start; max-width: 85%; background: rgba(0, 229, 255, 0.1); border: 1px solid rgba(0, 229, 255, 0.3); border-radius: 20px 20px 20px 0; padding: 15px; font-size: 0.85rem; line-height: 1.6; position: relative; animation: fadeIn 0.5s ease-out; }
        .bubble-ryuo::before { content: "ğŸ²"; position: absolute; top: -10px; left: -10px; font-size: 1.2rem; }
        
        /* ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ */
        .bubble-user { align-self: flex-end; max-width: 80%; background: var(--seiryu-blue); color: var(--deep-blue); border-radius: 20px 20px 0 20px; padding: 12px; font-size: 0.85rem; font-weight: bold; animation: fadeIn 0.3s ease-out; }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .chat-input-wrapper { background: rgba(255,255,255,0.05); padding: 15px; border-top: 1px solid rgba(255,255,255,0.1); backdrop-filter: blur(10px); display: flex; gap: 10px; }
        #chat-input { flex: 1; background: rgba(255,255,255,0.1); border: 1px solid var(--seiryu-blue); border-radius: 25px; padding: 10px 20px; color: white; outline: none; font-size: 0.9rem; }
        .send-btn { background: var(--seiryu-blue); color: var(--deep-blue); border: none; width: 45px; height: 45px; border-radius: 50%; font-weight: bold; cursor: pointer; display: flex; align-items: center; justify-content: center; }

        /* æ€è€ƒä¸­ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .thinking { display: none; padding: 10px; color: var(--seiryu-blue); font-size: 0.7rem; letter-spacing: 2px; }
        .pulse { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0% { opacity: 0.4; } 50% { opacity: 1; } 100% { opacity: 0.4; } }

        /* --- Nav --- */
        nav { position: fixed; bottom: 0; width: 100%; height: var(--nav-height); background: var(--deep-blue); display: flex; align-items: center; z-index: 4000; padding-bottom: 10px; }
        .nav-btn { flex: 1; color: white; border: none; background: none; display: flex; flex-direction: column; align-items: center; font-size: 0.6rem; opacity: 0.4; cursor: pointer; }
        .nav-btn.active { opacity: 1; color: var(--seiryu-blue); }
    </style>
</head>
<body>

    <header>
        <div style="font-weight:bold; font-size:0.8rem; color: #000;">ğŸ’  ENE-LOG : æ™ºæ…§ã®å¯¾è©±</div>
    </header>

    <div id="ryuo-view" class="view active">
        <div class="chat-container" id="chat-box">
            <div class="bubble-ryuo">
                ã‚ˆããå‚ã£ãŸã€è¦³æ¸¬è€…ã‚ˆã€‚ä»Šã®ã‚ãªãŸã®ã‚¨ãƒãƒ«ã‚®ãƒ¼ã¯ã€Œè€•ã€ã®æ³¢å‹•ã‚’æ„Ÿã˜ã‚‹ã€‚ä½•ã‹é¾ç‹ã«å•ã„ãŸã„ã“ã¨ã¯ã‚ã‚‹ã‹ï¼Ÿ
            </div>
        </div>
        
        <div id="thinking-indicator" class="thinking pulse" style="text-align: center;">KUKAI IS OBSERVING...</div>

        <div class="chat-input-wrapper">
            <input type="text" id="chat-input" placeholder="é¾ç‹ã«å•ã†..." onkeypress="if(event.key==='Enter') sendMessage()">
            <button class="send-btn" onclick="sendMessage()">å•</button>
        </div>
    </div>

    <nav>
        <button class="nav-btn" onclick="location.reload()">ğŸ—º<span>Map</span></button>
        <button class="nav-btn" onclick="location.reload()">ğŸ¥˜<span>Table</span></button>
        <button class="nav-btn active">ğŸ²<span>é¾ç‹</span></button>
    </nav>

<script>
    const chatBox = document.getElementById('chat-box');
    const chatInput = document.getElementById('chat-input');
    const thinking = document.getElementById('thinking-indicator');

    // ç°¡æ˜“çš„ãªé¾ç‹ã®çŸ¥æµè¢‹ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰
    const responses = [
        { key: "è¾²æ¥­", text: "åœŸã‚’æ„›ã§ã‚‹ã“ã¨ã¯ã€åœ°çƒã®è‚ºã‚’æ•´ãˆã‚‹ã“ã¨ã€‚ç´è±†èŒã®å®Ÿé¨“ã¯ã€ãƒŸã‚¯ãƒ­ã®ç§©åºã‚’æ•´ãˆã‚‹å°Šã„ä»•äº‹ã§ã™ãªã€‚" },
        { key: "äºº", text: "äººã¯ä¸€çŸ³ã€‚ã‚ãªãŸãŒæ³¢ç´‹ã‚’èµ·ã“ã›ã°ã€å¿…ãšèª°ã‹ã®é±—ã«å±Šãã¾ã™ã€‚ã¾ãšã¯Tableã«åº§ã‚‹ã“ã¨ã‹ã‚‰å§‹ã‚ãªã•ã„ã€‚" },
        { key: "ã©ã†ã™ã‚Œã°", text: "ç­”ãˆã‚’å¤–ã«æ±‚ã‚ã¦ã¯ãªã‚‰ã‚“ã€‚ä»Šã®Tableã«è¶³ã‚Šãªã„ã®ã¯ã€ã‚ãªãŸã®ã€ã‚ãŒã¾ã¾ã€ã‹ã‚‚ã—ã‚Œã‚“ãã€‚" },
        { key: "é¾", text: "é¾ã¯ã‚ãªãŸã®ä¸­ã«æ£²ã‚“ã§ã„ã‚‹ã€‚è¦³æ¸¬ï¼ˆGateï¼‰ã‚’ç¶šã‘ã‚‹ã“ã¨ã§ã€ãã®èƒŒä¸­ã¯ã‚ˆã‚Šé®®æ˜ã«è¦‹ãˆã¦ãã‚‹ã¯ãšã ã€‚" }
    ];

    function sendMessage() {
        const text = chatInput.value.trim();
        if (!text) return;

        // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒãƒ–ãƒ«è¿½åŠ 
        addBubble(text, 'user');
        chatInput.value = '';
        
        // æ€è€ƒä¸­æ¼”å‡º
        thinking.style.display = 'block';
        chatBox.scrollTop = chatBox.scrollHeight;

        // é¾ç‹ã®è¿”ç­”ï¼ˆ1.5ç§’å¾Œï¼‰
        setTimeout(() => {
            thinking.style.display = 'none';
            const reply = getRyuoResponse(text);
            addBubble(reply, 'ryuo');
            chatBox.scrollTop = chatBox.scrollHeight;
        }, 1500);
    }

    function addBubble(text, type) {
        const bubble = document.createElement('div');
        bubble.className = type === 'user' ? 'bubble-user' : 'bubble-ryuo';
        bubble.innerText = text;
        chatBox.appendChild(bubble);
    }

    function getRyuoResponse(input) {
        // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒãƒƒãƒãƒ³ã‚°
        for (let res of responses) {
            if (input.includes(res.key)) return res.text;
        }
        return "ãã®å•ã„ã€é¢ç™½ã„ã€‚ã—ã‹ã—ä»Šã¯ã¾ãšã€ç›®ã®å‰ã®å°ã•ãªã‚¢ãƒä½“é¨“ã‚’è¦³æ¸¬ã™ã‚‹ã“ã¨ã«é›†ä¸­ã—ãªã•ã„ã€‚é“ã¯è‡ªãšã¨æ‹“ã‘ã‚‹ã€‚";
    }
</script>
</body>
</html>
